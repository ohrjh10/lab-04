import paho.mqtt.client as mqtt

def on_connect(client, userdata, flags, rc):
    print("Connected to server with result code "+str(rc))

    client.subscript("ohr/pong")
    client.message_callback_add("ohr/pong", on_message_from_pong)

def on_message_from_pong(client, userdata, message)
    print("Custom callback - pong: "message.payload.decode())

if __name__ == '__main__':
    ip_address="172.20.10.4"
    client = mqtt.Client()

    client.on_message_from_pong = on_message
    client.on_connect = on_connect
    client.connect(host= ip_address, port=11000, keepalive=60)
    client.loop_start()
    time.sleep(1)

    while True:
        num = 1
        client.publish("ohr/ping", f"{ping}")
        print("Publishing ping")
        time.sleep(4)
